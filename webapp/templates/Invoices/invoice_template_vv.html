<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<style>
    body {
        font-family: Arial, sans-serif;
        font-size: 12px;
        margin: 25px;
        color: #000;
    }

    .invoice-box {
        width: 100%;
        border: 1px solid #ddd;
        padding: 25px;
    }

    /* Header layout using table (PDF-safe) */
    .header-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }

    .hdr-table {
        width: 100%;
        border: none !important;
        border-collapse: collapse;
        margin: 0;
        padding: 0;
        border-spacing: 0;
    }

    .hdr-table tr {
        line-height:   24; /* tighter row height */
        margin: 0;
        padding: 0;
    }

    .hdr-table td {
        border: none !important;
        padding: 2px 5px !important; /* reduce cell padding */
        line-height: 1 !important; /* compact text vertically */
        vertical-align: middle;
    }

    .header-table td {
        vertical-align: middle;
        text-align: center;
        border-bottom: 2px solid #000;
        padding: 5px;
    }
    .header-logo {
        width: 25%;
        text-align: left;
    }
    .header-logo img {
        width: 120px;
    }
    .header-title {
        width: 50%;
        text-align: center;
        font-size: 22px;
        font-weight: bold;
        letter-spacing: 1px;
    }
    .btw-crct {
        width: 50%;
        text-align: center;  
    }
    .header-right {
        width: 25%;
    }

    /* Invoice Info Section */
    .invoice-info {
        width: 100%;
        margin-top: 10px;
        border-collapse: collapse;
        font-size: 12px;
        table-layout: fixed;
    }
    .invoice-info td {
        padding: 4px 6px;
        vertical-align: top;
        word-wrap: break-word;
    }
    .invoice-info .label {
        font-weight: bold;
        width: 100px;
    }

    /* Highlight row */
    .highlight {
        background-color: #e6e6e6;
        padding: 6px;
        font-weight: bold;
        margin-top: 15px;
    }

    /* Items Table */
    table.items {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
        font-size: 12px;
    }
    table.items th, table.items td {
        border: 1px solid #777;
        padding: 6px;
        text-align: center;
    }
    table.items th {
        background-color: #f2f2f2;
        font-weight: bold;
    }
    .total-row td {
        font-weight: bold;
        background-color: #f9f9f9;
    }

    /* Remittance Section */
    .remittance {
        margin-top: 30px;
        border: 1px solid #888;
        padding: 15px;
    }
    .remittance h4 {
        background-color: #f2f2f2;
        margin: -15px -15px 10px -15px;
        padding: 8px;
        font-size: 13px;
        font-weight: bold;
    }
    .remittance table {
        width: 100%;
        border-collapse: collapse;
    }
    .remittance th, .remittance td {
        border: none;
        text-align: left;
        padding: 4px 0;
    }
</style>
</head>
<body>

<div class="invoice-box">
    {% load static %}

    <!-- Header Section -->
    <table class="header-table">
        <tr>
            <td class="header-logo">
                <img src="{% static 'assets/images/obsidian_logo.png' %}" alt="Logo">
            </td>
            <td class="header-title">INVOICE</td>
            <td class="header-right"></td>
        </tr>
    </table>

    <!-- Invoice Info Section -->
    <table class="hdr-table">
        <tr>
            <td class="header-logo"   style="font-weight: bold;">Invoice #:</td>
            <td  class="header-right">{{ invoice.invoice_no }} </td>
            <td  class="header-right"  style="font-weight: bold;">Bill To:</td>  
            <td  class="header-right">{{ invoice.customer_name }} </td> 
        </tr>
        <tr>
            <td    class="header-logo" style="font-weight: bold;">Date:</td>
            <td  class="btw-crct">{{ invoice.date }}</td> 
            <td  class="header-right">{{ invoice.mill_unit_invoices.mill.name }}</td> 
             
        </tr>
        <tr>
            <td   class="header-logo"   style="font-weight: bold;">Customer ID:</td>
            <td  class="btw-crct">{{ invoice.customer_id }}</td>
            <td  class="header-right">SITE-{{invoice.site_location}}</td>
             
        </tr>
    </table>

    <div class="highlight">
        Remittance Amount PKR: {{ invoice.remittance_amount }}
    </div>

    <!-- Items Table -->
    <table class="items">
        <thead>
            <tr>
                <th>S.No</th>
                <th>Item</th>
                <th>Pc's</th>
                <th>Description</th>
                <th>Amount PKR</th>
                <th>Payment</th>
                <th>Balance</th>
            </tr>
        </thead>
        <tbody>
            {% for item in invoice.invoice_items.all %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ item.item_name }}</td>
                <td>{{ item.pcs }}</td>
                <td>{{ item.description|default:"-" }}</td>
                <td>{{ item.amount }}</td>
                <td>{{ item.payment }}</td>
                <td>{{ item.balance }}</td>
            </tr>
            {% endfor %}
            <tr class="total-row">
                <td colspan="6">Total</td>
                <td>{{ invoice.remittance_amount }}</td>
            </tr>
        </tbody>
    </table>

    <!-- Remittance Section -->
    <div class="remittance">
        <h4>REMITTANCE</h4>
        <table>
            <tr><th>Customer Name:</th><td>{{ invoice.customer_name }}</td></tr>
            <tr><th>Customer ID:</th><td>{{ invoice.customer_id }}</td></tr>
            <tr><th>Statement #:</th><td>{{ invoice.invoice_no }}</td></tr>
            <tr><th>Date:</th><td>{{ invoice.date }}</td></tr>
            <tr><th>Amount Due (PKR):</th><td>{{ invoice.remittance_amount }}</td></tr>
            <tr><th>Amount Enclosed:</th><td>{{ invoice.remittance_amount }}</td></tr>
        </table>
    </div>
</div>

</body>
</html>
